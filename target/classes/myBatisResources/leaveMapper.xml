<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="leaveMapper">


	<resultMap type="leave" id="leaveResultMap">
		<id property="leaveId" column="leaveId" />
		<result property="employeeId" column="employeeId" />
		<result property="leaveType" column="leaveType" />
		<result property="daysRequested" column="daysRequested" />
		<result property="startDate" column="startDate" />
		<result property="endDate" column="endDate" />
		<result property="address" column="address" />
		<result property="dateOfApplication" column="dateOfApplication" />
		<result property="status" column="status" />
		<result property="dateOfApproval" column="dateOfApproval" />
	</resultMap>

	<insert id="insertLeave" parameterType="leave"
		keyProperty="leaveId" useGeneratedKeys="true">
		INSERT INTO
		leaves (employeeId,leaveType,daysRequested,startDate,endDate,address,dateOfApplication,status)
		VALUES
		(#{employeeId},#{leaveType},#{daysRequested},#{startDate},#{endDate},#{address},#{dateOfApplication},#{status})
	</insert>

	<select id="getLeaveById" parameterType="int"
		resultMap="leaveResultMap">
		SELECT * FROM leaves WHERE leaveId=#{leaveId}
	</select>
	
	<select id="getLeaveByEmployeeId" parameterType="String"
		resultMap="leaveResultMap">
		SELECT * FROM leaves WHERE employeeId=#{employeeId}
	</select>
	
	<select id="getAllLeaves" resultMap="leaveResultMap">
		SELECT * FROM leaves
	</select>
	
	<update id="updateLeave" parameterType="leave">
		UPDATE leaves SET
		status =
		#{status},dateOfApproval= #{dateOfApproval}
		WHERE leaveId = #{leaveId}
	</update>
	
	<update id="updateEditedLeave" parameterType="leave">
		UPDATE leaves SET
		employeeId=#{employeeId},leaveType=#{leaveType},daysRequested=#{daysRequested},startDate=#{startDate},endDate=#{endDate},address=#{address},dateOfApplication=#{dateOfApplication},status =
		#{status}
		WHERE leaveId = #{leaveId}
	</update>
	
	<delete id="delete" parameterType="int">
		DELETE FROM leaves WHERE leaveId=#{leaveId}
	</delete>
</mapper>